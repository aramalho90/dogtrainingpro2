<p id="notice"><%= notice %></p>

<%= search_form_for @q do |f| %>
  <%= f.label "Data inicio >= :", class: "ml-2" %>
  <%= f.text_field :start_date_gteq,type: 'date', class: "mr-5" %>
  <%= f.label "Data inicio <= :" %>
  <%= f.text_field :start_date_lteq,type: 'date', class: "mr-5"   %>
  <%= f.search_field :price_cont, placeholder: 'Preço', class: "mr-5" %>
  <%= f.search_field :dog_name_cont, placeholder: 'Cão', class: "mr-5" %>
  <%= f.search_field :dog_ownername_cont, placeholder: 'Nome do dono', class: "mr-5" %>
  <%= f.submit %>
<% end %>
<br>
<table class="table table-striped table-dark table-hover">
  <thead>
    <tr>
      <th colspan="3"></th>
      <th><%= sort_link(@q, :start_date, 'Data inicio') %></th>
      <th><%= sort_link(@q, :end_date, 'Data fim') %></th>
      <th>Preço por noite</th>
      <th>Pago</th>
      <th>Num Noites</th>
      <th>Preço Calculado</th>
      <th>Preço Final</th>
      <th><%= sort_link(@q, :dog_name, 'Cão') %></th>
      <th><%= sort_link(@q, :dog_ownername, 'Nome do dono') %></th>
    </tr>
  </thead>

  <tbody>
    <% @bookings.each do |booking| %>
      <tr>
        <td><%= link_to booking, style:"color:white;" do %><i class="far fa-eye"></i><% end %></td>
        <td><%= link_to edit_booking_path(booking), style:"color:white;" do %><i class="fas fa-pencil-alt"></i><% end %></td>
        <td><%= link_to booking, style:"color:white;", method: :delete, data: { confirm: 'Apagar esta entrada?' } do %><i class="fas fa-trash-alt"></i><% end %></td>
        <td><%= booking.start_date %></td>
        <td><%= booking.end_date %></td>
        <td><%= booking.price %> €</td>
        <td><%= to_yesorno(booking.paid) %></td>
        <td><%= (booking.end_date - booking.start_date).to_i %></td>
        <td><%= number_with_precision((booking.end_date - booking.start_date).to_i * booking.price,significant: true) %> €</td>
        <td><% if booking.changed_price.present? %>
                    <%= booking.changed_price %>€
                    <% end %></td>
        <td><%= booking.dog.name %></td>
        <td><%= booking.dog.ownername %></td>
      </tr>
    <% end %>
  </tbody>
</table>
<br>
<div class="digg_pagination">
    <%= will_paginate @bookings, :container => false %>
</div>
<br>
<%= link_to 'Adicionar estadia', new_booking_path, class: "btn btn-primary font-weight-bold", style: "margin-left:5px;color:white;" %>
